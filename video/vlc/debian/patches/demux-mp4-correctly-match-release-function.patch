From ce91452460a75d7424b165c4dc8db98114c3cbd9 Mon Sep 17 00:00:00 2001
From: Francois Cartegnie <fcartegnie@free.fr>
Date: Mon, 3 Aug 2015 15:17:32 +0200
Subject: [PATCH 1/1] demux: mp4: correctly match release function
--- a/vlc/modules/demux/mp4/libmp4.c
+++ b/vlc/modules/demux/mp4/libmp4.c
@@ -3634,6 +3634,11 @@
     {
         for( i_index = 0; ; i_index++ )
         {
+            if ( MP4_Box_Function[i_index].i_parent &&
+                 p_box->p_father &&
+                 p_box->p_father->i_type != MP4_Box_Function[i_index].i_parent )
+                continue;
+
             if( ( MP4_Box_Function[i_index].i_type == p_box->i_type )||
                 ( MP4_Box_Function[i_index].i_type == 0 ) )
             {
